{% extends 'base-connected.html.twig' %}

{% block title %}Hello DashboardController!{% endblock %}

{% block body %}
    <div data-controller="dashboard"
         data-action="monthpicker:date-change->dashboard#load"
         data-dashboard-url-value="{{ path('app_api_account') }}">

        {% include "@component/monthpicker.html.twig" with { date } only %}

        {% if account is defined %}
            <div class="mb-3">
                <div class="row">
                    <div class="col-12 col-sm-6 col-md-4 col-lg-3">
                        <div class="card"
                             data-controller="account"
                             data-account-entity-value="{}"
                             data-dashboard-target="account">
                            <div class="card-body">
                                <div class="card-subtitle mb-2 text-muted">{{ account.name }}</div>
                                <div class="card-title fs-4" data-account-target="balance"></div>
                                <div class="d-flex justify-content-between fs-6">
                                    <div class="text-success" data-account-target="income"></div>
                                    <div class="text-danger" data-account-target="expense"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        {% endif %}

        <div class="mb-3">
            <div class="row">
                {% for externalAccount in externalAccounts %}
                    <div class="col-12 col-sm-6 col-md-4 col-lg-3">
                        <div class="card"
                             data-controller="account"
                             data-account-entity-value="{}"
                             data-dashboard-target="externalAccount"
                             data-id="{{ externalAccount.id }}">
                            <div class="card-body">
                                <div class="card-subtitle mb-2 text-muted">{{ externalAccount.name }}</div>
                                <div class="card-title fs-4" data-account-target="balance"></div>
                                <div class="d-flex justify-content-between fs-6">
                                    <div class="text-success" data-account-target="income"></div>
                                    <div class="text-danger" data-account-target="expense"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    </div>
{% endblock %}
